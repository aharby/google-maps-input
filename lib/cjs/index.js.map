{"mappings":"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","sources":["src/index.tsx","src/input/GeopointInput.tsx","src/loader/GoogleMapsLoadProxy.tsx","src/loader/loadGoogleMapsApi.ts","src/loader/LoadError.tsx","src/input/GeopointSelect.tsx","src/map/SearchInput.tsx","src/map/SearchInput.styles.tsx","src/map/Map.tsx","src/map/util.ts","src/map/Map.styles.tsx","src/map/Marker.tsx","src/input/GeopointInput.styles.tsx","src/global-workaround.ts","src/diff/GeopointArrayDiff.tsx","src/diff/GeopointMove.tsx","src/map/Arrow.tsx","src/diff/GeopointFieldDiff.styles.tsx","src/diff/GeopointFieldDiff.tsx"],"sourcesContent":["import React from 'react'\r\nimport {createPlugin, SchemaType} from 'sanity'\r\nimport GeopointInput, {GeopointInputProps} from './input/GeopointInput'\r\nimport {setGeoConfig} from './global-workaround'\r\nimport {GeopointSchemaType} from './types'\r\n\r\nexport {GeopointArrayDiff, type DiffProps as GeopointArrayDiffProps} from './diff/GeopointArrayDiff'\r\nexport {GeopointFieldDiff, type DiffProps as GeopointFieldDiffProps} from './diff/GeopointFieldDiff'\r\n\r\nexport type {LatLng, GeopointSchemaType, Geopoint} from './types'\r\nexport {GeopointInput}\r\nexport type {GeopointInputProps}\r\n\r\nexport interface GoogleMapsInputConfig {\r\n  apiKey: string\r\n  defaultZoom?: number\r\n  defaultLocale?: string\r\n  defaultLocation?: {\r\n    lat: number\r\n    lng: number\r\n  }\r\n}\r\n\r\nexport const googleMapsInput = createPlugin<GoogleMapsInputConfig>((config) => {\r\n  setGeoConfig(config)\r\n  return {\r\n    name: 'google-maps-input',\r\n    form: {\r\n      components: {\r\n        input(props) {\r\n          if (isGeopoint(props.schemaType)) {\r\n            const castedProps = props as unknown as Omit<GeopointInputProps, 'geoConfig'>\r\n            return <GeopointInput {...castedProps} geoConfig={config} />\r\n          }\r\n          return props.renderDefault(props)\r\n        },\r\n      },\r\n    },\r\n  }\r\n})\r\n\r\nfunction isGeopoint(schemaType: SchemaType): schemaType is GeopointSchemaType {\r\n  return isType('geopoint', schemaType)\r\n}\r\n\r\nfunction isType(name: string, schema?: SchemaType): boolean {\r\n  if (schema?.name === name) {\r\n    return true\r\n    // eslint-disable-next-line no-negated-condition\r\n  } else if (!schema?.name) {\r\n    return false\r\n  }\r\n  return isType(name, schema?.type)\r\n}\r\n","import React from 'react'\r\nimport {uniqueId} from 'lodash'\r\nimport {Box, Button, Dialog, Grid} from '@sanity/ui'\r\nimport {EditIcon, TrashIcon} from '@sanity/icons'\r\nimport {ObjectInputProps, set, setIfMissing, unset, ChangeIndicator} from 'sanity'\r\nimport {GoogleMapsLoadProxy} from '../loader/GoogleMapsLoadProxy'\r\nimport {Geopoint, GeopointSchemaType, LatLng} from '../types'\r\nimport {GeopointSelect} from './GeopointSelect'\r\nimport {DialogInnerContainer, PreviewImage} from './GeopointInput.styles'\r\nimport {GoogleMapsInputConfig} from '../index'\r\nimport {getGeoConfig} from '../global-workaround'\r\n\r\nconst getStaticImageUrl = (value: LatLng, apiKey: string) => {\r\n  const loc = `${value.lat},${value.lng}`\r\n  const params = {\r\n    key: apiKey,\r\n    center: loc,\r\n    markers: loc,\r\n    zoom: 13,\r\n    scale: 2,\r\n    size: '640x300',\r\n  } as const\r\n  const qs = Object.keys(params).reduce((res, param) => {\r\n    return res.concat(`${param}=${encodeURIComponent(params[param as keyof typeof params])}`)\r\n  }, [] as string[])\r\n\r\n  return `https://maps.googleapis.com/maps/api/staticmap?${qs.join('&')}`\r\n}\r\n\r\nexport type GeopointInputProps = ObjectInputProps<Geopoint, GeopointSchemaType> & {\r\n  geoConfig: GoogleMapsInputConfig\r\n}\r\n\r\ntype Focusable = any\r\n\r\ninterface InputState {\r\n  modalOpen: boolean\r\n}\r\n\r\nclass GeopointInput extends React.PureComponent<GeopointInputProps, InputState> {\r\n  _geopointInputId = uniqueId('GeopointInput')\r\n\r\n  editButton: Focusable | undefined\r\n\r\n  constructor(props: GeopointInputProps) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      modalOpen: false,\r\n    }\r\n  }\r\n\r\n  setEditButton = (el: Focusable) => {\r\n    this.editButton = el\r\n  }\r\n\r\n  focus() {\r\n    if (this.editButton) {\r\n      this.editButton.focus()\r\n    }\r\n  }\r\n\r\n  handleToggleModal = () => {\r\n    this.setState((prevState) => ({modalOpen: !prevState.modalOpen}))\r\n  }\r\n\r\n  handleCloseModal = () => {\r\n    this.setState({modalOpen: false})\r\n  }\r\n\r\n  handleChange = (latLng: google.maps.LatLng) => {\r\n    const {schemaType, onChange} = this.props\r\n    onChange([\r\n      setIfMissing({\r\n        _type: schemaType.name,\r\n      }),\r\n      set(latLng.lat(), ['lat']),\r\n      set(latLng.lng(), ['lng']),\r\n    ])\r\n  }\r\n\r\n  handleClear = () => {\r\n    const {onChange} = this.props\r\n    onChange(unset())\r\n  }\r\n\r\n  render() {\r\n    const {value, readOnly, geoConfig: config, path, changed, focused} = this.props\r\n\r\n    const {modalOpen} = this.state\r\n\r\n    if (!config || !config.apiKey) {\r\n      return (\r\n        <div>\r\n          <p>\r\n            The <a href=\"https://sanity.io/docs/schema-types/geopoint-type\">Geopoint type</a> needs\r\n            a Google Maps API key with access to:\r\n          </p>\r\n          <ul>\r\n            <li>Google Maps JavaScript API</li>\r\n            <li>Google Places API Web Service</li>\r\n            <li>Google Static Maps API</li>\r\n          </ul>\r\n          <p>\r\n            Please enter the API key with access to these services in your googleMapsInput plugin\r\n            config.\r\n          </p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <>\r\n        {value && (\r\n          <ChangeIndicator path={path} isChanged={changed} hasFocus={!!focused}>\r\n            <PreviewImage src={getStaticImageUrl(value, config.apiKey)} alt=\"Map location\" />\r\n          </ChangeIndicator>\r\n        )}\r\n\r\n        {!readOnly && (\r\n          <Box marginTop={4}>\r\n            <Grid columns={2} gap={2}>\r\n              <Button\r\n                mode=\"ghost\"\r\n                icon={value && EditIcon}\r\n                padding={3}\r\n                ref={this.setEditButton}\r\n                text={value ? 'Edit' : 'Set location'}\r\n                onClick={this.handleToggleModal}\r\n              />\r\n\r\n              {value && (\r\n                <Button\r\n                  tone=\"critical\"\r\n                  icon={TrashIcon}\r\n                  padding={3}\r\n                  mode=\"ghost\"\r\n                  text={'Remove'}\r\n                  onClick={this.handleClear}\r\n                />\r\n              )}\r\n            </Grid>\r\n          </Box>\r\n        )}\r\n\r\n        {modalOpen && (\r\n          <Dialog\r\n            id={`${this._geopointInputId}_dialog`}\r\n            onClose={this.handleCloseModal}\r\n            header=\"Place the marker on the map\"\r\n            width={1}\r\n          >\r\n            <DialogInnerContainer>\r\n              <GoogleMapsLoadProxy config={getGeoConfig()}>\r\n                {(api) => (\r\n                  <GeopointSelect\r\n                    api={api}\r\n                    value={value || undefined}\r\n                    onChange={readOnly ? undefined : this.handleChange}\r\n                    defaultLocation={config.defaultLocation}\r\n                    defaultZoom={config.defaultZoom}\r\n                  />\r\n                )}\r\n              </GoogleMapsLoadProxy>\r\n            </DialogInnerContainer>\r\n          </Dialog>\r\n        )}\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nexport default GeopointInput\r\n","import React from 'react'\r\nimport {Subscription} from 'rxjs'\r\nimport {loadGoogleMapsApi, GoogleLoadState} from './loadGoogleMapsApi'\r\nimport {LoadError} from './LoadError'\r\nimport {GoogleMapsInputConfig} from '../index'\r\n\r\ninterface LoadProps {\r\n  children: (api: typeof window.google.maps) => React.ReactElement\r\n  config: GoogleMapsInputConfig\r\n}\r\n\r\nexport class GoogleMapsLoadProxy extends React.Component<LoadProps, GoogleLoadState> {\r\n  loadSubscription: Subscription | undefined\r\n\r\n  constructor(props: LoadProps) {\r\n    super(props)\r\n\r\n    this.state = {loadState: 'loading'}\r\n\r\n    let sync = true\r\n    this.loadSubscription = loadGoogleMapsApi(props.config).subscribe((loadState) => {\r\n      if (sync) {\r\n        this.state = loadState\r\n      } else {\r\n        this.setState(loadState)\r\n      }\r\n    })\r\n    sync = false\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.loadSubscription) {\r\n      this.loadSubscription.unsubscribe()\r\n    }\r\n  }\r\n\r\n  render() {\r\n    switch (this.state.loadState) {\r\n      case 'loadError':\r\n        return <LoadError error={this.state.error} isAuthError={false} />\r\n      case 'authError':\r\n        return <LoadError isAuthError />\r\n      case 'loading':\r\n        return <div>Loading Google Maps API</div>\r\n      case 'loaded':\r\n        return this.props.children(this.state.api) || null\r\n      default:\r\n        return null\r\n    }\r\n  }\r\n}\r\n","import {Observable, BehaviorSubject} from 'rxjs'\r\nimport {GoogleMapsInputConfig} from '../index'\r\n\r\ndeclare global {\r\n  interface Window {\r\n    gm_authFailure: any\r\n    ___sanity_googleMapsApiCallback: any\r\n  }\r\n}\r\n\r\nconst callbackName = '___sanity_googleMapsApiCallback'\r\nconst authFailureCallbackName = 'gm_authFailure'\r\nconst locale = (typeof window !== 'undefined' && window.navigator.language) || 'en'\r\n\r\nexport interface LoadingState {\r\n  loadState: 'loading'\r\n}\r\n\r\nexport interface LoadedState {\r\n  loadState: 'loaded'\r\n  api: typeof window.google.maps\r\n}\r\n\r\nexport interface LoadErrorState {\r\n  loadState: 'loadError'\r\n  error: Error\r\n}\r\n\r\nexport interface AuthErrorState {\r\n  loadState: 'authError'\r\n}\r\n\r\nexport type GoogleLoadState = LoadingState | LoadedState | LoadErrorState | AuthErrorState\r\n\r\nlet subject: BehaviorSubject<GoogleLoadState>\r\n\r\nexport function loadGoogleMapsApi(config: GoogleMapsInputConfig): Observable<GoogleLoadState> {\r\n  const selectedLocale = config.defaultLocale || locale || 'en-US'\r\n\r\n  if (subject) {\r\n    return subject\r\n  }\r\n\r\n  subject = new BehaviorSubject<GoogleLoadState>({loadState: 'loading'})\r\n\r\n  window[authFailureCallbackName] = () => {\r\n    delete window[authFailureCallbackName]\r\n    subject.next({loadState: 'authError'})\r\n  }\r\n\r\n  window[callbackName] = () => {\r\n    delete window[callbackName]\r\n    subject.next({loadState: 'loaded', api: window.google.maps})\r\n  }\r\n\r\n  const script = document.createElement('script')\r\n  script.onerror = (\r\n    event: Event | string,\r\n    source?: string,\r\n    lineno?: number,\r\n    colno?: number,\r\n    error?: Error\r\n  ) =>\r\n    subject.next({\r\n      loadState: 'loadError',\r\n      error: coeerceError(event, error),\r\n    } as LoadErrorState)\r\n\r\n  script.src = `https://maps.googleapis.com/maps/api/js?key=${config.apiKey}&libraries=places&callback=${callbackName}&language=${selectedLocale}`\r\n  document.getElementsByTagName('head')[0].appendChild(script)\r\n\r\n  return subject\r\n}\r\n\r\nfunction coeerceError(event: Event | string, error?: Error): Error {\r\n  if (error) {\r\n    return error\r\n  }\r\n\r\n  if (typeof event === 'string') {\r\n    return new Error(event)\r\n  }\r\n\r\n  return new Error(isErrorEvent(event) ? event.message : 'Failed to load Google Maps API')\r\n}\r\n\r\nfunction isErrorEvent(event: unknown): event is ErrorEvent {\r\n  if (typeof event !== 'object' || event === null) {\r\n    return false\r\n  }\r\n\r\n  if (!('message' in event)) {\r\n    return false\r\n  }\r\n\r\n  return typeof (event as ErrorEvent).message === 'string'\r\n}\r\n","import * as React from 'react'\r\nimport {Card, Box, Text, Code} from '@sanity/ui'\r\n\r\ntype Props = {error: Error; isAuthError: false} | {isAuthError: true}\r\n\r\nexport function LoadError(props: Props) {\r\n  return (\r\n    <Card tone=\"critical\" radius={1}>\r\n      <Box as=\"header\" paddingX={4} paddingTop={4} paddingBottom={1}>\r\n        <Text as=\"h2\" weight=\"bold\">\r\n          Google Maps failed to load\r\n        </Text>\r\n      </Box>\r\n\r\n      <Box paddingX={4} paddingTop={4} paddingBottom={1}>\r\n        {props.isAuthError ? (\r\n          <AuthError />\r\n        ) : (\r\n          <>\r\n            <Text as=\"h3\">Error details:</Text>\r\n            <pre>\r\n              <Code size={1}>{'error' in props && props.error?.message}</Code>\r\n            </pre>\r\n          </>\r\n        )}\r\n      </Box>\r\n    </Card>\r\n  )\r\n}\r\n\r\nfunction AuthError() {\r\n  return (\r\n    <Text>\r\n      <p>The error appears to be related to authentication</p>\r\n      <p>Common causes include:</p>\r\n      <ul>\r\n        <li>Incorrect API key</li>\r\n        <li>Referer not allowed</li>\r\n        <li>Missing authentication scope</li>\r\n      </ul>\r\n      <p>Check the browser developer tools for more information.</p>\r\n    </Text>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport {SearchInput} from '../map/SearchInput'\r\nimport {GoogleMap} from '../map/Map'\r\nimport {Marker} from '../map/Marker'\r\nimport {LatLng, Geopoint} from '../types'\r\n\r\nconst fallbackLatLng: LatLng = {lat: 40.7058254, lng: -74.1180863}\r\n\r\ninterface SelectProps {\r\n  api: typeof window.google.maps\r\n  value?: Geopoint\r\n  onChange?: (latLng: google.maps.LatLng) => void\r\n  defaultLocation?: LatLng\r\n  defaultZoom?: number\r\n}\r\n\r\nexport class GeopointSelect extends React.PureComponent<SelectProps> {\r\n  static defaultProps = {\r\n    defaultZoom: 8,\r\n    defaultLocation: {lng: 10.74609, lat: 59.91273},\r\n  }\r\n\r\n  mapRef = React.createRef<HTMLDivElement>()\r\n\r\n  getCenter() {\r\n    const {value = {}, defaultLocation = {}} = this.props\r\n    const point: LatLng = {...fallbackLatLng, ...defaultLocation, ...value}\r\n    return point\r\n  }\r\n\r\n  handlePlaceChanged = (place: google.maps.places.PlaceResult) => {\r\n    if (!place.geometry?.location) {\r\n      return\r\n    }\r\n    console.log(\"handlePlaceChange()\");\r\n    console.log(place);\r\n    console.log(place.address_components)\r\n    console.log(place.adr_address)\r\n    this.setValue(place.geometry.location)\r\n  }\r\n\r\n  handleMarkerDragEnd = (event: google.maps.MapMouseEvent) => {\r\n    if (event.latLng) this.setValue(event.latLng)\r\n  }\r\n\r\n  handleMapClick = (event: google.maps.MapMouseEvent) => {\r\n    if (event.latLng) this.setValue(event.latLng)\r\n  }\r\n\r\n  setValue(geoPoint: google.maps.LatLng) {\r\n    if (this.props.onChange) {\r\n      this.props.onChange(geoPoint)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {api, defaultZoom, value, onChange} = this.props\r\n    return (\r\n      <GoogleMap\r\n        api={api}\r\n        location={this.getCenter()}\r\n        onClick={this.handleMapClick}\r\n        defaultZoom={defaultZoom}\r\n      >\r\n        {(map) => (\r\n          <>\r\n            <SearchInput api={api} map={map} onChange={this.handlePlaceChanged} />\r\n            {value && (\r\n              <Marker\r\n                api={api}\r\n                map={map}\r\n                position={value}\r\n                onMove={onChange ? this.handleMarkerDragEnd : undefined}\r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n      </GoogleMap>\r\n    )\r\n  }\r\n}\r\n","import * as React from 'react'\r\nimport {TextInput} from '@sanity/ui'\r\nimport {WrapperContainer} from './SearchInput.styles'\r\n\r\ninterface Props {\r\n  api: typeof window.google.maps\r\n  map: google.maps.Map\r\n  onChange: (result: google.maps.places.PlaceResult) => void\r\n}\r\n\r\nexport class SearchInput extends React.PureComponent<Props> {\r\n  searchInputRef = React.createRef<HTMLInputElement>()\r\n  autoComplete: google.maps.places.Autocomplete | undefined\r\n\r\n  handleChange = () => {\r\n    console.log(\"this is handleChange()/searchInput\")\r\n    if (!this.autoComplete) {\r\n      return\r\n    }\r\n\r\n    this.props.onChange(this.autoComplete.getPlace())\r\n\r\n    if (this.searchInputRef.current) {\r\n      console.log(this.searchInputRef.current.value)\r\n      console.log(this.searchInputRef.current)\r\n      this.searchInputRef.current.value = ''\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const input = this.searchInputRef.current\r\n    if (!input) {\r\n      return\r\n    }\r\n\r\n    const {api, map} = this.props\r\n    const {Circle, places, event} = api\r\n    const searchBounds = new Circle({center: map.getCenter(), radius: 100}).getBounds()!\r\n    this.autoComplete = new places.Autocomplete(input, {\r\n      bounds: searchBounds,\r\n      types: [], // return all kinds of places\r\n    })\r\n\r\n    event.addListener(this.autoComplete, 'place_changed', this.handleChange)\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <WrapperContainer>\r\n        <TextInput\r\n          name=\"place\"\r\n          ref={this.searchInputRef}\r\n          placeholder=\"test1Search for place or address\"\r\n          padding={4}\r\n        />\r\n      </WrapperContainer>\r\n    )\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const WrapperContainer = styled.div`\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 10px;\r\n  width: 220px;\r\n`\r\n","import React from 'react'\r\nimport {LatLng} from '../types'\r\nimport {latLngAreEqual} from './util'\r\nimport {MapContainer} from './Map.styles'\r\n\r\ninterface MapProps {\r\n  api: typeof window.google.maps\r\n  location: LatLng\r\n  bounds?: google.maps.LatLngBounds\r\n  defaultZoom?: number\r\n  mapTypeControl?: boolean\r\n  scrollWheel?: boolean\r\n  controlSize?: number\r\n  onClick?: (event: google.maps.MapMouseEvent) => void\r\n  children?: (map: google.maps.Map) => React.ReactElement\r\n}\r\n\r\ninterface MapState {\r\n  map: google.maps.Map | undefined\r\n}\r\n\r\nexport class GoogleMap extends React.PureComponent<MapProps, MapState> {\r\n  static defaultProps = {\r\n    defaultZoom: 8,\r\n    scrollWheel: true,\r\n  }\r\n\r\n  state: MapState = {map: undefined}\r\n  clickHandler: google.maps.MapsEventListener | undefined\r\n  mapRef = React.createRef<HTMLDivElement>()\r\n  mapEl: HTMLDivElement | null = null\r\n\r\n  componentDidMount() {\r\n    this.attachClickHandler()\r\n  }\r\n\r\n  attachClickHandler = () => {\r\n    const map = this.state.map\r\n    if (!map) {\r\n      return\r\n    }\r\n\r\n    const {api, onClick} = this.props\r\n    const {event} = api\r\n\r\n    if (this.clickHandler) {\r\n      this.clickHandler.remove()\r\n    }\r\n\r\n    if (onClick) {\r\n      this.clickHandler = event.addListener(map, 'click', onClick)\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: MapProps) {\r\n    const map = this.state.map\r\n    if (!map) {\r\n      return\r\n    }\r\n\r\n    const {onClick, location, bounds} = this.props\r\n\r\n    if (prevProps.onClick !== onClick) {\r\n      this.attachClickHandler()\r\n    }\r\n\r\n    if (!latLngAreEqual(prevProps.location, location)) {\r\n      map.panTo(this.getCenter())\r\n    }\r\n\r\n    if (bounds && (!prevProps.bounds || !bounds.equals(prevProps.bounds))) {\r\n      map.fitBounds(bounds)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.clickHandler) {\r\n      this.clickHandler.remove()\r\n    }\r\n  }\r\n\r\n  getCenter(): google.maps.LatLng {\r\n    const {location, api} = this.props\r\n    return new api.LatLng(location.lat, location.lng)\r\n  }\r\n\r\n  constructMap(el: HTMLDivElement) {\r\n    const {defaultZoom, api, mapTypeControl, controlSize, bounds, scrollWheel} = this.props\r\n\r\n    const map = new api.Map(el, {\r\n      zoom: defaultZoom,\r\n      center: this.getCenter(),\r\n      scrollwheel: scrollWheel,\r\n      streetViewControl: false,\r\n      mapTypeControl,\r\n      controlSize,\r\n    })\r\n\r\n    if (bounds) {\r\n      map.fitBounds(bounds)\r\n    }\r\n\r\n    return map\r\n  }\r\n\r\n  setMapElement = (element: HTMLDivElement | null) => {\r\n    if (element && element !== this.mapEl) {\r\n      const map = this.constructMap(element)\r\n      this.setState({map}, this.attachClickHandler)\r\n    }\r\n\r\n    this.mapEl = element\r\n  }\r\n\r\n  render() {\r\n    const {children} = this.props\r\n    const {map} = this.state\r\n    return (\r\n      <>\r\n        <MapContainer ref={this.setMapElement} />\r\n        {children && map ? children(map) : null}\r\n      </>\r\n    )\r\n  }\r\n}\r\n","import {LatLng} from '../types'\r\n\r\nexport function latLngAreEqual(\r\n  latLng1: LatLng | google.maps.LatLng,\r\n  latLng2: LatLng | google.maps.LatLng\r\n): boolean {\r\n  const lat1 = typeof latLng1.lat === 'function' ? latLng1.lat() : latLng1.lat\r\n  const lng1 = typeof latLng1.lng === 'function' ? latLng1.lng() : latLng1.lng\r\n\r\n  const lat2 = typeof latLng2.lat === 'function' ? latLng2.lat() : latLng2.lat\r\n  const lng2 = typeof latLng2.lng === 'function' ? latLng2.lng() : latLng2.lng\r\n\r\n  return lat1 === lat2 && lng1 === lng2\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const MapContainer = styled.div`\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n`\r\n","import * as React from 'react'\r\nimport {LatLng} from '../types'\r\nimport {latLngAreEqual} from './util'\r\n\r\nconst markerPath =\r\n  'M 3.052 3.7 C 1.56 5.293 0.626 7.612 0.663 9.793 C 0.738 14.352 2.793 16.077 6.078 22.351 C 7.263 25.111 8.497 28.032 9.672 32.871 C 9.835 33.584 9.994 34.246 10.069 34.305 C 10.143 34.362 10.301 33.697 10.465 32.983 C 11.639 28.145 12.875 25.226 14.059 22.466 C 17.344 16.192 19.398 14.466 19.474 9.908 C 19.511 7.727 18.574 5.405 17.083 3.814 C 15.379 1.994 12.809 0.649 10.069 0.593 C 7.328 0.536 4.756 1.882 3.052 3.7 Z'\r\n\r\ninterface Props {\r\n  api: typeof window.google.maps\r\n  map: google.maps.Map\r\n  onMove?: (event: google.maps.MapMouseEvent) => void\r\n  onClick?: (event: google.maps.MapMouseEvent) => void\r\n  position: LatLng | google.maps.LatLng\r\n  zIndex?: number\r\n  opacity?: number\r\n  label?: string\r\n  markerRef?: React.MutableRefObject<google.maps.Marker | undefined>\r\n  color?: {background: string; border: string; text: string}\r\n}\r\n\r\nexport class Marker extends React.PureComponent<Props> {\r\n  marker: google.maps.Marker | undefined\r\n\r\n  eventHandlers: {\r\n    move?: google.maps.MapsEventListener\r\n    click?: google.maps.MapsEventListener\r\n  } = {}\r\n\r\n  componentDidMount() {\r\n    const {position, api, map, onMove, zIndex, opacity, label, markerRef, color} = this.props\r\n    const {Marker: GMarker} = api\r\n\r\n    let icon: google.maps.Symbol | undefined\r\n    if (color) {\r\n      icon = {\r\n        path: markerPath,\r\n        fillOpacity: 1,\r\n        fillColor: color.background,\r\n        strokeColor: color.border,\r\n        strokeWeight: 2,\r\n        anchor: new api.Point(10, 35),\r\n        labelOrigin: new api.Point(10, 11),\r\n      }\r\n    }\r\n\r\n    this.marker = new GMarker({\r\n      draggable: Boolean(onMove),\r\n      position,\r\n      map,\r\n      zIndex,\r\n      opacity,\r\n      label,\r\n      icon,\r\n    })\r\n\r\n    if (markerRef) {\r\n      markerRef.current = this.marker\r\n    }\r\n\r\n    this.attachMoveHandler()\r\n    this.attachClickHandler()\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (!this.marker) {\r\n      return\r\n    }\r\n\r\n    const {position, onMove, label, zIndex, opacity, map} = this.props\r\n\r\n    if (prevProps.onMove !== onMove) {\r\n      this.attachMoveHandler()\r\n    }\r\n\r\n    if (!latLngAreEqual(prevProps.position, position)) {\r\n      this.marker.setPosition(position)\r\n    }\r\n\r\n    if (prevProps.label !== label) {\r\n      this.marker.setLabel(label || null)\r\n    }\r\n\r\n    if (prevProps.zIndex !== zIndex) {\r\n      this.marker.setZIndex(zIndex || null)\r\n    }\r\n\r\n    if (prevProps.opacity !== opacity) {\r\n      this.marker.setOpacity(opacity || null)\r\n    }\r\n\r\n    if (prevProps.map !== map) {\r\n      this.marker.setMap(map)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.eventHandlers.move) {\r\n      this.eventHandlers.move.remove()\r\n    }\r\n\r\n    if (this.marker) {\r\n      this.marker.setMap(null)\r\n    }\r\n  }\r\n\r\n  attachMoveHandler() {\r\n    const {api, onMove} = this.props\r\n    if (this.eventHandlers.move) {\r\n      this.eventHandlers.move.remove()\r\n    }\r\n    if (this.marker && onMove) {\r\n      this.eventHandlers.move = api.event.addListener(this.marker, 'dragend', onMove)\r\n    }\r\n  }\r\n\r\n  attachClickHandler() {\r\n    const {api, onClick} = this.props\r\n    if (this.eventHandlers.click) {\r\n      this.eventHandlers.click.remove()\r\n    }\r\n    if (this.marker && onClick) {\r\n      this.eventHandlers.click = api.event.addListener(this.marker, 'click', onClick)\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  render(): any {\r\n    return null\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const PreviewImage = styled.img`\r\n  width: 100%;\r\n  height: auto;\r\n  vertical-align: top;\r\n`\r\n\r\nexport const DialogInnerContainer = styled.div`\r\n  height: 40rem;\r\n  width: 50rem;\r\n`\r\n","import {GoogleMapsInputConfig} from './index'\r\n\r\nlet config: GoogleMapsInputConfig\r\n\r\nexport function getGeoConfig(): GoogleMapsInputConfig {\r\n  return config as GoogleMapsInputConfig\r\n}\r\n\r\nexport function setGeoConfig(newConfig: GoogleMapsInputConfig): void {\r\n  config = newConfig\r\n}\r\n","import * as React from 'react'\r\nimport {ArrayDiff, ObjectDiff, Diff, DiffProps as GenericDiffProps, DiffComponent} from 'sanity'\r\nimport {GoogleMapsLoadProxy} from '../loader/GoogleMapsLoadProxy'\r\nimport {GoogleMap} from '../map/Map'\r\nimport {Geopoint} from '../types'\r\nimport {GeopointMove} from './GeopointMove'\r\nimport {RootContainer} from './GeopointFieldDiff.styles'\r\nimport {getGeoConfig} from '../global-workaround'\r\n\r\nexport type DiffProps = GenericDiffProps<ArrayDiff<Geopoint>>\r\n\r\nexport const GeopointArrayDiff: DiffComponent<ArrayDiff<Geopoint>> = ({diff, schemaType}) => {\r\n  return (\r\n    <RootContainer>\r\n      <GoogleMapsLoadProxy config={getGeoConfig()}>\r\n        {(api) => <GeopointDiff api={api} diff={diff} schemaType={schemaType} />}\r\n      </GoogleMapsLoadProxy>\r\n    </RootContainer>\r\n  )\r\n}\r\n\r\nfunction GeopointDiff({api, diff}: DiffProps & {api: typeof google.maps}) {\r\n  const fromValue = (diff.fromValue || []).filter(hasCoordinates)\r\n  const toValue = (diff.toValue || []).filter(hasCoordinates)\r\n  if (fromValue.length === 0 && toValue.length === 0) {\r\n    return null\r\n  }\r\n\r\n  const bounds = getBounds(fromValue, toValue, api)\r\n  return (\r\n    <GoogleMap\r\n      api={api}\r\n      location={bounds.getCenter().toJSON()}\r\n      mapTypeControl={false}\r\n      controlSize={20}\r\n      bounds={bounds}\r\n    >\r\n      {(map) => (\r\n        <>\r\n          {diff.items.map(({toIndex, diff: pointDiff}) => {\r\n            if (!isChangeDiff(pointDiff)) {\r\n              return null\r\n            }\r\n\r\n            return (\r\n              <GeopointMove\r\n                key={toIndex}\r\n                api={api}\r\n                map={map}\r\n                diff={pointDiff}\r\n                label={`${toIndex}`}\r\n              />\r\n            )\r\n          })}\r\n        </>\r\n      )}\r\n    </GoogleMap>\r\n  )\r\n}\r\n\r\nfunction isChangeDiff(diff: Diff): diff is ObjectDiff<Geopoint> {\r\n  return diff.action !== 'unchanged' && diff.type === 'object'\r\n}\r\n\r\nfunction hasCoordinates(point: Partial<Geopoint>): point is Geopoint {\r\n  return typeof point.lat === 'number' && typeof point.lng === 'number'\r\n}\r\n\r\nfunction getBounds(\r\n  fromValue: google.maps.LatLngLiteral[] | null | undefined,\r\n  toValue: google.maps.LatLngLiteral[] | null | undefined,\r\n  api: typeof window.google.maps\r\n): google.maps.LatLngBounds {\r\n  const bounds = new api.LatLngBounds()\r\n  const points = [...(fromValue || []), ...(toValue || [])]\r\n  points.forEach((point) => bounds.extend(point))\r\n  return bounds\r\n}\r\n","import * as React from 'react'\r\nimport {useUserColor, ObjectDiff} from 'sanity'\r\nimport {Marker} from '../map/Marker'\r\nimport {Arrow} from '../map/Arrow'\r\nimport {Geopoint} from '../types'\r\n\r\ninterface Props {\r\n  api: typeof window.google.maps\r\n  map: google.maps.Map\r\n  diff: ObjectDiff<Geopoint>\r\n  label?: string\r\n}\r\n\r\nexport function GeopointMove({diff, api, map, label}: Props) {\r\n  const {fromValue: from, toValue: to} = diff\r\n  const annotation = diff.isChanged ? diff.annotation : undefined\r\n  const userColor = useUserColor(annotation ? annotation.author : null) || undefined\r\n  const fromRef = React.useRef<google.maps.Marker>()\r\n  const toRef = React.useRef<google.maps.Marker>()\r\n\r\n  return (\r\n    <>\r\n      {from && (\r\n        <Marker\r\n          api={api}\r\n          map={map}\r\n          position={from}\r\n          zIndex={0}\r\n          opacity={0.55}\r\n          markerRef={fromRef}\r\n          color={userColor}\r\n        />\r\n      )}\r\n      {from && to && <Arrow api={api} map={map} from={from} to={to} zIndex={1} color={userColor} />}\r\n      {to && (\r\n        <Marker\r\n          api={api}\r\n          map={map}\r\n          position={to}\r\n          zIndex={2}\r\n          markerRef={toRef}\r\n          label={label}\r\n          color={userColor}\r\n        />\r\n      )}\r\n    </>\r\n  )\r\n}\r\n","import * as React from 'react'\r\nimport {LatLng} from '../types'\r\nimport {latLngAreEqual} from './util'\r\n\r\ninterface Props {\r\n  api: typeof window.google.maps\r\n  map: google.maps.Map\r\n  from: LatLng\r\n  to: LatLng\r\n  color?: {background: string; border: string; text: string}\r\n  zIndex?: number\r\n  arrowRef?: React.MutableRefObject<google.maps.Polyline | undefined>\r\n  onClick?: (event: google.maps.MapMouseEvent) => void\r\n}\r\n\r\nexport class Arrow extends React.PureComponent<Props> {\r\n  line: google.maps.Polyline | undefined\r\n\r\n  eventHandlers: {\r\n    click?: google.maps.MapsEventListener\r\n  } = {}\r\n\r\n  componentDidMount() {\r\n    const {from, to, api, map, zIndex, onClick, color, arrowRef} = this.props\r\n    const lineSymbol = {\r\n      path: api.SymbolPath.FORWARD_OPEN_ARROW,\r\n    }\r\n\r\n    this.line = new api.Polyline({\r\n      map,\r\n      zIndex,\r\n      path: [from, to],\r\n      icons: [{icon: lineSymbol, offset: '50%'}],\r\n      strokeOpacity: 0.55,\r\n      strokeColor: color ? color.text : 'black',\r\n    })\r\n\r\n    if (onClick) {\r\n      this.eventHandlers.click = api.event.addListener(this.line, 'click', onClick)\r\n    }\r\n\r\n    if (arrowRef) {\r\n      arrowRef.current = this.line\r\n    }\r\n  }\r\n\r\n  componentDidUpdate(prevProps: Props) {\r\n    if (!this.line) {\r\n      return\r\n    }\r\n\r\n    const {from, to, map} = this.props\r\n    if (!latLngAreEqual(prevProps.from, from) || !latLngAreEqual(prevProps.to, to)) {\r\n      this.line.setPath([from, to])\r\n    }\r\n\r\n    if (prevProps.map !== map) {\r\n      this.line.setMap(map)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.line) {\r\n      this.line.setMap(null)\r\n    }\r\n\r\n    if (this.eventHandlers.click) {\r\n      this.eventHandlers.click.remove()\r\n    }\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  render(): any {\r\n    return null\r\n  }\r\n}\r\n","import styled from 'styled-components'\r\n\r\nexport const RootContainer = styled.div`\r\n  position: relative;\r\n  min-height: 200px;\r\n\r\n  &:empty {\r\n    background-color: var(--card-skeleton-color-from);\r\n    display: table;\r\n    width: 100%;\r\n  }\r\n\r\n  &:empty:after {\r\n    content: 'Missing/invalid data';\r\n    display: table-cell;\r\n    vertical-align: middle;\r\n    text-align: center;\r\n    position: relative;\r\n  }\r\n`\r\n","import * as React from 'react'\r\nimport {\r\n  DiffComponent,\r\n  ObjectDiff,\r\n  DiffProps as GenericDiffProps,\r\n  DiffTooltip,\r\n  getAnnotationAtPath,\r\n} from 'sanity'\r\nimport {GoogleMapsLoadProxy} from '../loader/GoogleMapsLoadProxy'\r\nimport {GoogleMap} from '../map/Map'\r\nimport {Geopoint} from '../types'\r\nimport {GeopointMove} from './GeopointMove'\r\nimport {RootContainer} from './GeopointFieldDiff.styles'\r\nimport {getGeoConfig} from '../global-workaround'\r\n\r\nexport type DiffProps = GenericDiffProps<ObjectDiff<Geopoint>>\r\n\r\nexport const GeopointFieldDiff: DiffComponent<ObjectDiff<Geopoint>> = ({diff, schemaType}) => {\r\n  return (\r\n    <RootContainer>\r\n      <GoogleMapsLoadProxy config={getGeoConfig()}>\r\n        {(api) => <GeopointDiff api={api} diff={diff} schemaType={schemaType} />}\r\n      </GoogleMapsLoadProxy>\r\n    </RootContainer>\r\n  )\r\n}\r\n\r\nfunction GeopointDiff({api, diff}: DiffProps & {api: typeof window.google.maps}) {\r\n  const {fromValue, toValue} = diff\r\n  const annotation =\r\n    getAnnotationAtPath(diff, ['lat']) ||\r\n    getAnnotationAtPath(diff, ['lng']) ||\r\n    getAnnotationAtPath(diff, [])\r\n\r\n  const center = getCenter(diff, api)\r\n  const bounds = fromValue && toValue ? getBounds(fromValue, toValue, api) : undefined\r\n\r\n  return (\r\n    <DiffTooltip annotations={annotation ? [annotation] : []} description={getAction(diff)}>\r\n      <div>\r\n        <GoogleMap\r\n          api={api}\r\n          location={center}\r\n          mapTypeControl={false}\r\n          controlSize={20}\r\n          bounds={bounds}\r\n          scrollWheel={false}\r\n        >\r\n          {(map) => <GeopointMove api={api} map={map} diff={diff} />}\r\n        </GoogleMap>\r\n      </div>\r\n    </DiffTooltip>\r\n  )\r\n}\r\n\r\nfunction getBounds(\r\n  fromValue: google.maps.LatLngLiteral,\r\n  toValue: google.maps.LatLngLiteral,\r\n  api: typeof window.google.maps\r\n): google.maps.LatLngBounds {\r\n  return new api.LatLngBounds().extend(fromValue).extend(toValue)\r\n}\r\n\r\nfunction getCenter(\r\n  diff: DiffProps['diff'],\r\n  api: typeof window.google.maps\r\n): google.maps.LatLngLiteral {\r\n  const {fromValue, toValue} = diff\r\n  if (fromValue && toValue) {\r\n    return getBounds(fromValue, toValue, api).getCenter().toJSON()\r\n  }\r\n\r\n  if (fromValue) {\r\n    return fromValue\r\n  }\r\n\r\n  if (toValue) {\r\n    return toValue\r\n  }\r\n\r\n  throw new Error('Neither a from or a to value present')\r\n}\r\n\r\nfunction getAction(diff: ObjectDiff<Geopoint>) {\r\n  const {fromValue, toValue} = diff\r\n  if (fromValue && toValue) {\r\n    return 'Moved'\r\n  } else if (fromValue) {\r\n    return 'Removed'\r\n  } else if (toValue) {\r\n    return 'Added'\r\n  }\r\n\r\n  return 'Unchanged'\r\n}\r\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../"}